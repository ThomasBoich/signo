var System;!function(e){}(System||(System={}));var Cryptography;!function(Cryptography){var CryptoPro;!function(CryptoPro){!function(e){e[e.About="CAdESCOM.About"]="About",e[e.Store="CAdESCOM.store"]="Store",e[e.RequestPKCS10="X509Enrollment.CX509CertificateRequestPkcs10"]="RequestPKCS10",e[e.Enrollment="X509Enrollment.CX509Enrollment"]="Enrollment",e[e.EnrollmentPrivateKey="X509Enrollment.CX509PrivateKey"]="EnrollmentPrivateKey",e[e.EnrollmentEKU="X509Enrollment.CX509ExtensionKeyUsage"]="EnrollmentEKU",e[e.EnrollmentSubject="X509Enrollment.CX500DistinguishedName"]="EnrollmentSubject",e[e.EnrollmentObjects="X509Enrollment.CObjectIds"]="EnrollmentObjects",e[e.EnrollmentObject="X509Enrollment.CObjectId"]="EnrollmentObject",e[e.EnrollmentEnhansed="X509Enrollment.CX509ExtensionEnhancedKeyUsage"]="EnrollmentEnhansed",e[e.EnrollTemplate="X509Enrollment.CX509ExtensionTemplateName"]="EnrollTemplate",e[e.CspInformations="X509Enrollment.CCspInformations"]="CspInformations"}(CryptoPro.CadespluginObject||(CryptoPro.CadespluginObject={}));var CadespluginObject=CryptoPro.CadespluginObject,Cadesplugin=function(){function Cadesplugin(e){if(this.q=e,this.name="cadesplugin",this.hiddenStyle="width:0;height:0;visiblity=hidden",this.ErrorResolver=new Cryptography.Error.ErrorResolver,this.IsLoaded=!1,!e)throw{message:'Argument "q" is empty'};this.Navigator=new System.Browser.Utils.Navigator(window.navigator),this.PluginSupport=this.checSupportedPluginType(this.Navigator),this.IsAsync=this.PluginSupport.isAsync,this.initCadespluginObject()}return Cadesplugin.prototype.Load=function(e){void 0===e&&(e=0);var t=this.q.defer(),n=this,r=1e4;if(this.IsLoaded)t.resolve(n);else if(n.PluginSupport.nativeBridge)try{this.iosBridge=new CryptoPro.IOSnativeBridge,this.IsLoaded=!0,t.resolve(n)}catch(i){t.reject(i)}else if(n.PluginSupport.ppapi)try{"Chrome"==n.Navigator.Name||"Opera"==n.Navigator.Name||"YaBrowser"==n.Navigator.Name||"Firefox"==n.Navigator.Name?("Chrome"==n.Navigator.Name?n.load_chrome_extension():"Opera"==n.Navigator.Name?n.load_opera_extension():"YaBrowser"==n.Navigator.Name?n.load_yandex_extension():"Firefox"==n.Navigator.Name&&n.load_firefox_extension().then(function(e){t.resolve(e)}),setTimeout(function(){n.IsLoaded===!1&&(n.listener&&window.removeEventListener("message",n.listener),n.pluginObject=null,n.IsLoaded=!1,t.reject({message:"Timeout loading cadesplugin"}))},Math.max(e,r)),window.postMessage("cadesplugin_echo_request","*"),window.addEventListener("message",function(r){"string"==typeof r.data&&r.data.match("cadesplugin_loaded")&&(n.listener=this,"Firefox"!=n.Navigator.Name&&setTimeout(function(){n.cpcsp_chrome_nmcades=window.cpcsp_chrome_nmcades,n.cpcsp_chrome_nmcades?n.cpcsp_chrome_nmcades.CreatePluginObject().then(function(e){n.pluginObject=e,n.IsLoaded=!0,t.resolve(n)},function(e){t.reject(e)}):(n.listener&&window.removeEventListener("message",n.listener),n.pluginObject=null,n.IsLoaded=!1,t.reject({message:"Cadesplugin not loaded"}))},e))},!1)):t.reject({message:"Not supported browser"})}catch(i){t.reject(i)}else try{n.load_npapi_plugin(),n.IsLoaded=!0,t.resolve(n)}catch(i){t.reject(i)}return t.promise},Cadesplugin.prototype.OnMessage=function(e){},Cadesplugin.prototype.CreateObject=function(e){var t=this,n=t.q.defer();if(this.PluginSupport.nativeBridge)try{var r=t.call_ru_cryptopro_npcades_10_native_bridge("CreateObject",[e]);n.resolve(r)}catch(i){n.reject(i)}else if("MSIE"==this.Navigator.Name&&this.PluginSupport.npapi)try{n.resolve(new ActiveXObject(e))}catch(i){n.reject(i)}else if(this.PluginSupport.ppapi)if("Chrome"==this.Navigator.Name||"Opera"==this.Navigator.Name||"YaBrowser"==this.Navigator.Name||"Firefox"==this.Navigator.Name)try{t.cpcsp_chrome_nmcades?t.pluginObject?t.pluginObject.CreateObjectAsync(e).then(function(e){return n.resolve(e)},function(e){return n.reject(e)}):n.reject({message:"Не удалось создать объект cpcsp_chrome_nmcades"}):n.reject({message:"Объект cpcsp_chrome_nmcades отсутсвует. Не удалось обратиться к криптографии"})}catch(o){n.reject(o)}else n.reject({message:"Not supported browser"});else if(this.PluginSupport.npapi)try{var r=t.pluginObject.CreateObject(e);n.resolve(r)}catch(i){n.reject(i)}return n.promise},Cadesplugin.prototype.About=function(){return Cryptography.CryptoPro.CadespluginAbout.Create(this)},Cadesplugin.prototype.Cryptoproviders=function(){return Cryptography.CryptoPro.CspProviders.Create(this)},Cadesplugin.prototype.Capabilities=function(e){void 0===e&&(e=500);var t=this,n=t.q.defer(),r={certificateCreating:!1,certificateInstalling:!1,activex:"undefined"==typeof window.ActiveXObject?!1:!0};return t.Load(e).then(function(i){t.GetPluginState(e).then(function(e){r.state=e,e.isInstall&&!e.isLocked?t.About().then(function(e){r.plugin=e.PluginVersion;var t=e.CSPVersion().then(function(e){r.csp=e,r.certificateInstalling=!(3==e.MajorVersion&&0==e.MinorVersion)||e.MajorVersion<3,r.certificateInstalling=!0},n.resolve(r));t["finally"](function(e){return n.resolve(r)})},n.resolve(r)):n.resolve(r)},n.resolve(r))},n.resolve(r)),n.promise},Cadesplugin.prototype.GetName=function(){return this.name},Cadesplugin.prototype.GetPluginState=function(e){void 0===e&&(e=1e3);var t,n=this;t={isInstall:!1,isLocked:!1};var r=n.q.defer();if(n.PluginSupport.ppapi){if("Chrome"==n.Navigator.Name||"Opera"==n.Navigator.Name||"YaBrowser"==n.Navigator.Name||"Firefox"==n.Navigator.Name){var i;switch(n.Navigator.Name){case"Chrome":i="chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js";break;case"Opera":i="chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js";break;case"YaBrowser":i="chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js";break;case"Firefox":n.load_firefox_extension().then(function(e){r.resolve({isInstall:!0,isLocked:!1})})["catch"](function(){r.resolve({isInstall:!1,isLocked:!1})});break;default:r.reject({message:"Don' supported browser"})}if(i)return n.checkPluginUrl(i,e)}}else if(n.isIE()||n.isIOS())n.About().then(function(){t.isInstall=!0,t.isLocked=!1,r.resolve(t)},function(e){r.resolve(t)});else if(n.PluginSupport.npapi){var o=document.querySelector("body"),s=document.createElement("object");s.setAttribute("id","cadesplugin_object_test"),s.setAttribute("type","application/x-cades"),s.setAttribute("style",n.hiddenStyle),o&&o.appendChild(s);var a=document.querySelector("#cadesplugin_object_test");if(a){try{a.CreateObject(CadespluginObject.About),t.isInstall=!0,t.isLocked=!1}catch(c){var u=navigator.mimeTypes["application/x-cades"];if(u){var l=u.enabledPlugin;l&&(t.isInstall=!0,t.isLocked=!0)}}a.parent&&a.parent.removeChild(a)}r.resolve(t)}else r.reject({message:"Unknown browser supported"});return r.promise},Cadesplugin.prototype.checkPluginUrl=function(e,t){var n,r=this;n={isInstall:!1,isLocked:!1};var i=r.q.defer(),o=new XMLHttpRequest;return o.open("HEAD",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.timeout=t,o.onreadystatechange=function(){4==o.readyState&&(200==o.status?(n.isInstall=!0,n.isLocked=!1,i.resolve(n)):i.resolve(n))},o.ontimeout=function(){i.resolve(n)},o.send(),i.promise},Cadesplugin.prototype.Reset=function(){var e=this;e.listener&&window.removeEventListener("message",e.listener)},Cadesplugin.prototype.GetQService=function(){return this.q},Cadesplugin.prototype.checSupportedPluginType=function(e){var t={isAsync:!1};switch(e.Name){case"Opera":e.Version.Major>34?(t.isAsync=!0,t.ppapi=!0):t.npapi=!0;break;case"YaBrowser":e.Version.Major>15?(t.isAsync=!0,t.ppapi=!0):t.npapi=!0;break;case"Chrome":e.Version.Major>44?(t.isAsync=!0,t.ppapi=!0):t.npapi=!0;break;case"Safari":t.nativeBridge=!0;break;case"Firefox":e.Version.Major>52?(window.allow_firefox_cadesplugin_async=1,t.isAsync=!0,t.ppapi=!0):t.npapi=!0;break;default:t.npapi=!0}return t},Cadesplugin.prototype.isIE=function(){var e="Microsoft Internet Explorer"==navigator.appName||navigator.userAgent.match(/Trident\/./i);return e},Cadesplugin.prototype.isIOS=function(){var e=navigator.userAgent.match(/ipod/i)||navigator.userAgent.match(/ipad/i)||navigator.userAgent.match(/iphone/i);return e},Cadesplugin.prototype.isChromiumBased=function(){var e=navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/opera/i);return e},Cadesplugin.prototype.isMSEdge=function(){return navigator.userAgent.match(/Edge\/./i)},Cadesplugin.prototype.call_ru_cryptopro_npcades_10_native_bridge=function(functionName,array){var tmpobj,ex;if(this.iosBridge.call(functionName,array,function(e,response){ex=e;var str="tmpobj="+response;eval(str),"string"==typeof tmpobj&&(tmpobj=tmpobj.replace(/\\\n/gm,"\n"),tmpobj=tmpobj.replace(/\\\r/gm,"\r"))}),ex)throw ex;return tmpobj},Cadesplugin.prototype.load_chrome_extension=function(){this.load_ppapi_extension("chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js")},Cadesplugin.prototype.load_opera_extension=function(){this.load_ppapi_extension("chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js")},Cadesplugin.prototype.load_yandex_extension=function(){this.load_ppapi_extension("chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js")},Cadesplugin.prototype.load_firefox_extension=function(){var e=this,t=this,n=t.q.defer(),r=setTimeout(function(){t.pluginObject||n.reject({message:"Cadesplugin not loaded"})},5e3);return window.postMessage("cadesplugin_echo_request","*"),window.addEventListener("message",function(i){if("string"==typeof i.data&&i.data.match("cadesplugin_loaded")){clearTimeout(r),t.listener=e;var o=i.data.substring(i.data.indexOf("url:")+4),s=document.createElement("script");s.setAttribute("type","text/javascript"),s.setAttribute("src",o),s.onerror=function(e){n.reject({message:"Cadesplugin not loaded"})},s.onload=function(){setTimeout(function(){t.cpcsp_chrome_nmcades=window.cpcsp_chrome_nmcades,t.cpcsp_chrome_nmcades?t.cpcsp_chrome_nmcades.CreatePluginObject().then(function(e){t.pluginObject=e,t.IsLoaded=!0,n.resolve(t)},function(e){n.reject(e)}):(t.listener&&window.removeEventListener("message",t.listener),t.pluginObject=null,t.IsLoaded=!1,n.reject({message:"Cadesplugin not loaded"}))},2e3)},document.getElementsByTagName("head")[0].appendChild(s)}}),n.promise},Cadesplugin.prototype.load_ppapi_extension=function(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(t)},Cadesplugin.prototype.load_npapi_plugin=function(){var e=document.querySelector("body"),t=document.createElement("object");t.setAttribute("id","cadesplugin_object"),t.setAttribute("type","application/x-cades"),t.setAttribute("style",this.hiddenStyle),e&&e.appendChild(t),this.pluginObject=document.getElementById("cadesplugin_object")},Cadesplugin.prototype.initCadespluginObject=function(){var e={JSModuleVersion:"2.0.2",CAPICOM_LOCAL_MACHINE_STORE:1,CAPICOM_CURRENT_USER_STORE:2,CAPICOM_MY_STORE:"My",CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED:2,CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED:0,CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING:1,CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE:2,XmlDsigGost3410UrlObsolete:"http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411",XmlDsigGost3411UrlObsolete:"http://www.w3.org/2001/04/xmldsig-more#gostr3411",XmlDsigGost3410Url:"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411",XmlDsigGost3411Url:"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411",CADESCOM_CADES_DEFAULT:0,CADESCOM_CADES_BES:1,CADESCOM_CADES_T:5,CADESCOM_CADES_X_LONG_TYPE_1:93,CADESCOM_ENCODE_BASE64:0,CADESCOM_ENCODE_BINARY:1,CADESCOM_ENCODE_ANY:-1,CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT:0,CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN:1,CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY:2,CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME:0,CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME:1,CAPICOM_CERTIFICATE_FIND_SHA1_HASH:0,CAPICOM_CERTIFICATE_FIND_ISSUER_NAME:2,CAPICOM_CERTIFICATE_FIND_ROOT_NAME:3,CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME:4,CAPICOM_CERTIFICATE_FIND_EXTENSION:5,CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY:6,CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY:7,CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY:8,CAPICOM_CERTIFICATE_FIND_TIME_VALID:9,CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID:10,CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED:11,CAPICOM_CERTIFICATE_FIND_KEY_USAGE:12,CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE:128,CAPICOM_PROPID_ENHKEY_USAGE:9,CAPICOM_OID_OTHER:0,CAPICOM_OID_KEY_USAGE_EXTENSION:10,CAPICOM_EKU_CLIENT_AUTH:2,CAPICOM_EKU_SMARTCARD_LOGON:5,CAPICOM_EKU_OTHER:0,CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME:0,CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME:1,CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION:2,CADESCOM_ATTRIBUTE_OTHER:-1,CADESCOM_STRING_TO_UCS2LE:0,CADESCOM_BASE64_TO_BINARY:1,CADESCOM_DISPLAY_DATA_NONE:0,CADESCOM_DISPLAY_DATA_CONTENT:1,CADESCOM_DISPLAY_DATA_ATTRIBUTE:2,CADESCOM_ENCRYPTION_ALGORITHM_RC2:0,CADESCOM_ENCRYPTION_ALGORITHM_RC4:1,CADESCOM_ENCRYPTION_ALGORITHM_DES:2,CADESCOM_ENCRYPTION_ALGORITHM_3DES:3,CADESCOM_ENCRYPTION_ALGORITHM_AES:4,CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89:25,CADESCOM_HASH_ALGORITHM_SHA1:0,CADESCOM_HASH_ALGORITHM_MD2:1,CADESCOM_HASH_ALGORITHM_MD4:2,CADESCOM_HASH_ALGORITHM_MD5:3,CADESCOM_HASH_ALGORITHM_SHA_256:4,CADESCOM_HASH_ALGORITHM_SHA_384:5,CADESCOM_HASH_ALGORITHM_SHA_512:6,CADESCOM_HASH_ALGORITHM_CP_GOST_3411:100,CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256:101,CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512:102,LOG_LEVEL_DEBUG:4,LOG_LEVEL_INFO:2,LOG_LEVEL_ERROR:1};window.cadesplugin=e},Cadesplugin}();CryptoPro.Cadesplugin=Cadesplugin}(CryptoPro=Cryptography.CryptoPro||(Cryptography.CryptoPro={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(e){var t=function(){function t(e,t){this.plugin=e,this._native=t}return t.prototype.CSPLicense=function(){var e=this,t="{407E5BA7-6406-40BF-A4DC-3654B8F584C1}",n="CPCSPLicense.CPCSPLicense";if(e.plugin.IsAsync)return e.plugin.CreateObject(n).then(function(e){return e.GetExpireDate(t)});try{return e.plugin.CreateObject(n).then(function(e){return e.GetExpireDate(t)})}catch(r){return e.plugin.GetQService().reject(r)}},t.prototype.CSPVersion=function(e,t){void 0===e&&(e=""),void 0===t&&(t=75);var n=this,r=n.plugin.GetQService().defer();if(n.plugin.IsAsync)n._native.CSPVersion(e,t).then(function(e){var t={},i=[];i.push(e.MajorVersion.then(function(e){return t.MajorVersion=e})),i.push(e.MinorVersion.then(function(e){return t.MinorVersion=e})),i.push(e.BuildVersion.then(function(e){return t.BuildVersion=e})),n.plugin.GetQService().all(i)["finally"](function(){t.toStringDefault=t.MajorVersion+"."+t.MinorVersion+"."+t.BuildVersion,r.resolve(t)})},r.reject);else try{var i=n._native.CSPVersion(e,t),o={MajorVersion:i.MajorVersion,MinorVersion:i.MinorVersion,BuildVersion:i.BuikdVersion,toStringDefault:i.MajorVersion+"."+i.MinorVersion+"."+i.BuildVersion};r.resolve(o)}catch(s){r.reject(s)}return r.promise},t.prototype.CSPName=function(e){void 0===e&&(e=75);var t=this;if(t.plugin.IsAsync)return t._native.CSPName(e);try{return t._native.CSPName(e)}catch(n){t.plugin.GetQService().reject(n)}},t.prototype.ProviderVersion=function(e,t){void 0===e&&(e=""),void 0===t&&(t=75);var n=this;if(n.plugin.IsAsync)return n._native.ProviderVersion(e,t);try{var r=n._native.ProviderVersion(e,t);return n.plugin.GetQService().resolve(r)}catch(i){return n.plugin.GetQService().reject(r)}},t.Create=function(n){var r;return n.IsAsync?n.CreateObject(e.CadespluginObject.About).then(function(e){r=new t(n,e);var i=[];return i.push(e.BuildVersion.then(function(e){return r.BuildVersion=e})),i.push(e.MajorVersion.then(function(e){return r.MajorVersion=e})),i.push(e.MinorVersion.then(function(e){return r.MinorVersion=e})),i.push(e.Version.then(function(e){return r.Version=e})),n.GetQService().all(i)}).then(function(e){return r}):n.CreateObject(e.CadespluginObject.About).then(function(e){try{return r=new t(n,e),r.BuildVersion=e.BuildVersion,r.MajorVersion=e.MajorVersion,r.MinorVersion=e.MinorVersion,r.PluginVersion=e.PluginVersion,r.Version=e.Version,r}catch(i){return n.GetQService().reject(i)}})},t}();e.CadespluginAbout=t}(t=e.CryptoPro||(e.CryptoPro={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(e){var t=function(){function e(){e.callbacksCount=1,e.callbacks={}}return e.prototype.resultForCallback=function(t,n){var r=e.callbacks[t];r&&r.apply(null,n)},e.prototype.call=function(t,n,r){var i=r&&"function"==typeof r,o=i?e.callbacksCount++:0;i&&(e.callbacks[o]=r);var s=document.createElement("IFRAME"),a=new Array("_CPNP_handle");try{s.setAttribute("src","cpnp-js-call:"+t+":"+o+":"+encodeURIComponent(JSON.stringify(n,a)))}catch(c){throw c}document.documentElement.appendChild(s),s.parentNode.removeChild(s),s=null},e}();e.IOSnativeBridge=t}(t=e.CryptoPro||(e.CryptoPro={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(e){var t=function(){function t(e,t){this.plugin=e,this.cspProvidersObj=t,t&&t.AddAvailableCsps()}return t.prototype.getProviders=function(){var e=this;if(this.plugin.IsAsync){var t=[];return this.cspProvidersObj.Count.then(function(n){for(var r=0;n-1>=r;r++)t.push(e.getProviderByIndex(r));return e.plugin.GetQService().all(t)})}for(var t=[],n=0;n<=e.cspProvidersObj.Count-1;n++)t.push(this.getProviderByIndex(n));return e.plugin.GetQService().all(t)},t.prototype.getProviderByIndex=function(e){var t,n=this;if(this.plugin.IsAsync){return n.cspProvidersObj.ItemByIndex(e).then(function(e){return n.getProviderInfo(e)}).then(function(e){return e?(t=e,n.getHashAlgorithmsByProviderByName(e.name)):null}).then(function(e){return t?(t.algorithms=e,t):null})}var r=n.cspProvidersObj.ItemByIndex(e);return n.getProviderInfo(r).then(function(e){return e?(t=e,n.getHashAlgorithmsByProviderByName(e.name)):(t=null,null)}).then(function(e){return t?(t.algorithms=e,t):null})},t.prototype.getProviderByName=function(e){var t=this;if(this.plugin.IsAsync){return t.cspProvidersObj.ItemByName(e).then(function(e){return t.getProviderInfo(e)})}var n=t.cspProvidersObj.ItemByName(e);return t.getProviderInfo(n)},t.prototype.getHashAlgorithmsByProviderIndex=function(e){var t,n=this;if(this.plugin.IsAsync){var r=[];return n.cspProvidersObj.ItemByIndex(e).then(function(e){return e.CspAlgorithms}).then(function(e){return t=e,e.Count}).then(function(e){for(var i=0;e-1>=i;i++)r.push(t.GetByIndex(i).then(function(e){return n.getAlgorithmInfo(e)}));return n.plugin.GetQService().all(r)})}for(var i=n.cspProvidersObj.ItemByIndex(e),r=[],o=0;o<=i.CspAlhorithms.Count-1;o++){var s=i.CspAlgorithms.ItemByIndex(o);r.push(this.getAlgorithmInfo(s))}return n.plugin.GetQService().all(r)},t.prototype.getHashAlgorithmsByProviderByName=function(e){var t,n=this;if(this.plugin.IsAsync){var r=[];return n.cspProvidersObj.ItemByName(e).then(function(e){return e.CspAlgorithms}).then(function(e){return t=e,e.Count}).then(function(e){for(var i=0;e-1>=i;i++)r.push(t.ItemByIndex(i).then(function(e){return n.getAlgorithmInfo(e)}));return n.plugin.GetQService().all(r)})}for(var i=n.cspProvidersObj.ItemByName(e),r=[],o=0;o<=i.CspAlgorithms.Count-1;o++){var s=i.CspAlgorithms.ItemByIndex(o);r.push(this.getAlgorithmInfo(s))}return n.plugin.GetQService().all(r)},t.prototype.getProviderInfo=function(e){var t=this,n={},r=[];return t.plugin.IsAsync?e.LegacyCsp.then(function(i){return i===!0?(r=[e.LegacyCsp.then(function(e){n.legacy=e}),e.KeySpec.then(function(e){n.keySpec=e}),e.Name.then(function(e){n.name=e}),e.Type.then(function(e){n.type=e})],t.plugin.GetQService().all(r).then(function(){return n})):null}):e.LegacyCsp?(n={legacy:e.LegacyCsp,keySpec:e.KeySpec,name:e.Name,hasHardwareRandomNumberGenerator:e.HasHardwareRandomNumberGenerator,isHardwareDevice:e.IsHardwareDevice,isRemovable:e.IsRemovable,isSmartCard:e.IsSmartCard,isSoftwareDevice:e.IsSoftwareDevice,maxKeyContainerNameLength:e.MaxKeyContainerNameLength,type:e.Type,valid:e.Valid,version:e.Version},t.plugin.GetQService().resolve(n)):t.plugin.GetQService().resolve(null)},t.prototype.getAlgorithmInfo=function(e){var t=this,n={},r=[];return t.plugin.IsAsync?(r=[e.DefaultLength.then(function(e){n.defaultLength=e}),e.IncrementLength.then(function(e){n.incrementLength=e}),e.MaxLength.then(function(e){n.maxLength=e}),e.MinLength.then(function(e){n.minLength=e}),e.Name.then(function(e){n.name=e}),e.Operations.then(function(e){n.operations=e}),e.Type.then(function(e){n.type=e}),t.getAlgorithmOid(e).then(function(e){n.oid=e})],t.plugin.GetQService().all(r).then(function(){return n})):(n={defaultLength:e.DefaultLength,incrementLength:e.IncrementLength,longName:e.LongName,maxLength:e.MaxLength,minLength:e.MinLength,name:e.Name,operations:e.Operations,type:e.Type,valid:e.Valid},t.getAlgorithmOid(e).then(function(e){n.oid=e}),t.plugin.GetQService().resolve(n))},t.prototype.getAlgorithmOid=function(e){var t=this,n={},r=[];if(t.plugin.IsAsync)return e.GetAlgorithmOid(0,0).then(function(e){return r=[e.FriendlyName.then(function(e){n.friendlyName=e}),e.Value.then(function(e){n.oid=e})],t.plugin.GetQService().all(r).then(function(){return n})});var i=e.GetAlgorithmOid(0,0);return n={friendlyName:i.FriendlyName,oid:i.Value},t.plugin.GetQService().resolve(n)},t.Create=function(n){return n.IsAsync?n.CreateObject(e.CadespluginObject.CspInformations).then(function(e){return new t(n,e)}):n.CreateObject(e.CadespluginObject.CspInformations).then(function(e){try{return n.GetQService().resolve(new t(n,e))}catch(r){return n.GetQService().reject(r)}})},t}();e.CspProviders=t}(t=e.CryptoPro||(e.CryptoPro={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.resolve=function(e){var t=e,n={message:""};if("string"==typeof e)e={message:e};else if("object"==typeof e&&!e.number){var r=/\((0[xX][0-9a-fA-F]+)\)/gim.exec(e.message);e.number=r?r[1]:null,e.number&&(e.number=parseInt(e.number,16))}switch(e.number){case 2147942405:n.message="Отказано в доступе",n.number=2147942405;break;case 2148073482:case-2146893814:n.message="Указан неправильный тип. Удалите запомненые пароли и попробуйте еще раз.",n.number=2148073482;break;case 2148081675:case-2146885621:n.message="Не удается найти сертификат и закрытый ключ для расшифровки.",n.number=2148081675;break;case 2148204809:n.message="Цепочка сертификатов обработана, но завершилась на корневом сертификате, который не является доверенным на Вашем рабочем месте. Установите корневой сертификат Удостоверяющего центра",n.number=2148204809;break;case 2148204810:n.message="Невозможно построить цепочку сертификата, которым Вы осуществляете подпись. Установите корневой сертификат Удостоверяющего центра",n.number=2148204810;break;case 2148532334:case-2146434962:n.message="Отменено пользователем",n.number=2148532334;break;case 2148081668:case-2146885628:n.message="Не удалось найти закрытый ключ для данного сертификата",n.number=2148081668;break;case 2148073503:n.message="Неправильный параметр набора ключей. Возможно отсутствует привязка закрытого ключа к сертификату",n.number=2148073503;break;case 2148204801:case-2146762495:n.message="Время создания сертификата не совпадает со временем на Вашем рабочем месте. Скачайте сертификат и установите его вручную.",n.number=2148204801;break;case 2148532331:case-2146434965:n.message="Нет доступа к карте или к носителю. Введен неправильный пароль (PIN-код)",n.number=2148532331;break;case 2148073507:case-2146893789:n.message="Токен безопасности не имеет доступного места для хранения дополнительного контейнера.",n.number=2148073507;break;case 2148073504:case-2146893792:n.message="Внутренняя ошибка криптопровайдера",n.number=2148073504;break;case 2147746132:n.message="На рабочем месте не установлен  xenroll.dll",n.number=2147746132;break;case 2148073494:n.message="Не удалось найти закрытый ключ или нет доступа к закрытому ключу",n.number=2148073494;default:n.message=e.message,n.number=e.number}return n.original=t,n},e}();e.ErrorResolver=t}(t=e.Error||(e.Error={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(e){}(t=e.Error||(e.Error={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.split=function(e){for(var t=this,n={},r=e.split(","),i=[],o=-1,s=!1,a=0;a<r.length;a++){for(var c=-1,u=!1;;){if(c=r[a].indexOf('"',c+1),!(c>=0))break;u=!u}s?(i[o]+=r[a],s=!u):(o++,i[o]=r[a],s=u)}var l;for(var p in i)if(!(i[p].split&&(l=i[p].split("="),l.length<2))){n[t._trim(l[0])]=l[1];for(var h=2;h<l.length;h++)n[t._trim(l[0])]+="="+l[h]}return null==n["ИНН"]&&null!=n["OID.1.2.643.3.131.1.1"]&&(n["ИНН"]=n["OID.1.2.643.3.131.1.1"]),null!=n["OID.1.2.840.113549.1.9.2"]&&(l=t._stripquotes(t._trim(n["OID.1.2.840.113549.1.9.2"])).split("="),2==l.length&&(n[t._trim(l[0])]=t._trim(l[1]))),n},e.prototype.splitAsArray=function(e){for(var t=0,n=0,r=[],i=0;i<=e.length-1;i++)'"'==e[i]?n++:","==e[i]&&n%2==0?(r.push(e.substr(t,i-t)),t=i+1,n=0):i==e.length-1&&r.push(e.substr(t));for(var o=[],i=0;i<=r.length-1;i++){var s=null,a=r[i].indexOf("=");if(a>0&&(s=new Array(2),s[0]=r[i].substr(0,a),s[1]=r[i].substr(a+1)),s){var c=this._trim(s[0]),u=null;switch(c){case"1.2.643.3.131.1.1":case"1.2.643.100.1":case"1.2.643.100.3":u="NUMERICSTRING:"+s[1];break;default:u=this._stripquotes(s[1])}o.push(c),o.push(u)}}return o},e.prototype.splitAsObjectArray=function(e){for(var t=0,n=0,r=[],i=0;i<=e.length-1;i++)'"'==e[i]?n++:","==e[i]&&n%2==0?(r.push(e.substr(t,i-t)),t=i+1,n=0):i==e.length-1&&r.push(e.substr(t));for(var o=[],i=0;i<=r.length-1;i++){var s=null,a=r[i].indexOf("=");if(a>0&&(s=new Array(2),s[0]=r[i].substr(0,a),s[1]=r[i].substr(a+1)),s){var c=this._trim(s[0]),u=null;u=this._stripquotes(s[1]),o.push({rdn:c,value:u})}}return o},e.prototype._trim=function(e){return e.replace(/(^\s+)|(\s+$)/g,"")},e.prototype._stripquotes=function(e){return e.replace(/(^")|("$)/g,"")},e}();e.X509CertificateStringSplitter=t}(t=e.X509Certificate||(e.X509Certificate={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(t){!function(e){e[e.Thumbprint=1]="Thumbprint",e[e.Serial=2]="Serial"}(t.CertificateFindValue||(t.CertificateFindValue={}));var n=(t.CertificateFindValue,function(){function e(){}return e}());t.X509CertificateSubject=n;var r=function(){function e(){}return e}();t.ExtendetKey=r;var i=function(){function n(e,t){this.plugin=e;if(!t)throw{message:'Argument "certificate" is empty'};this._native=t}return n.prototype.BasicConstraints=function(){},n.prototype.Display=function(){this._native&&this._native.Display()},n.prototype.Export=function(){},n.prototype.ExtendedKeyUsage=function(){},n.prototype.ExtendedProperties=function(){},n.prototype.Extensions=function(){},n.prototype.GetInfo=function(){},n.prototype.HasPrivateKey=function(){var e=this.plugin.GetQService().defer();if(this._native)if(this.plugin.IsAsync)this._native.HasPrivateKey().then(e.resolve,e.reject);else try{var t=this._native.HasPrivateKey();e.resolve(t)}catch(n){e.reject(n)}else e.reject({message:"Don't have native object"});return e.promise},n.prototype.Import=function(){},n.prototype.IsValid=function(){},n.prototype.KeyUsage=function(){},n.prototype.Save=function(e,t,n,r){this._native&&this._native.Save(e,t,n,r)},n.prototype.Template=function(){this._native&&this._native.Template()},n.prototype.GetNative=function(){return this._native},n.prototype.GetSubject=function(){var e=new t.X509CertificateStringSplitter;return e.split(this.SubjectName)},n.prototype.GetIssuer=function(){var e=new t.X509CertificateStringSplitter;return e.split(this.IssuerName)},n.Create=function(t,n){var r=t.GetQService().defer(),i=[];if(t.IsAsync)n.then(function(n){var o=new e.X509Certificate.X509Certificate(t,n);i.push(n.IssuerName.then(function(e){o.IssuerName=e})),i.push(n.SerialNumber.then(function(e){o.SerialNumber=e})),i.push(n.Thumbprint.then(function(e){o.Thumbprint=e})),i.push(n.SubjectName.then(function(e){o.SubjectName=e})),i.push(n.ValidFromDate.then(function(e){o.ValidFromDate=e})),i.push(n.ValidToDate.then(function(e){o.ValidToDate=e})),i.push(n.Version.then(function(e){o.Version=e})),t.GetQService().all(i)["finally"](function(){r.resolve(o)})});else{var o=new e.X509Certificate.X509Certificate(t,n);o.IssuerName=n.IssuerName,o.SerialNumber=n.SerialNumber,o.Thumbprint=n.Thumbprint,o.SubjectName=n.SubjectName,o.ValidFromDate=n.ValidFromDate,o.ValidToDate=n.ValidToDate,o.Version=n.Version,r.resolve(o)}return r.promise},n}();t.X509Certificate=i}(t=e.X509Certificate||(e.X509Certificate={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(t){!function(e){e[e.CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT=0]="CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT",e[e.CERTIFICATE_INCLUDE_WHOLE_CHAIN=1]="CERTIFICATE_INCLUDE_WHOLE_CHAIN",e[e.CERTIFICATE_INCLUDE_END_ENTITY_ONLY=2]="CERTIFICATE_INCLUDE_END_ENTITY_ONLY"}(t.CmsSignerOptions||(t.CmsSignerOptions={}));var n=(t.CmsSignerOptions,function(){function t(e,t){this.plugin=e,this._native=t}return t.prototype.ComputeSignature=function(e,t,n){void 0===n&&(n=!1);var r=this,i=r.plugin.GetQService().defer();return r.plugin.IsAsync?(r._native.propset_Certificate(t.GetNative()),r.plugin.CreateObject("CAdESCOM.CadesSignedData").then(function(t){t.propset_ContentEncoding(1),t.propset_Content(e),t.SignCades(r._native,1,n,0).then(function(e){i.resolve(e)},function(e){i.reject(e)})},function(e){i.reject(e)})):(r._native.Certificate=t.GetNative(),r.plugin.CreateObject("CAdESCOM.CadesSignedData").then(function(t){try{t.ContentEncoding=1,t.Content=e;var o=t.SignCades(r._native,1,n,0);i.resolve(o)}catch(s){i.reject(s)}},function(e){i.reject(e)})),i.promise},t.prototype.ComputeTextSignature=function(e,t,n){void 0===n&&(n=!1);var r=this,i=r.plugin.GetQService().defer();return r.plugin.IsAsync?(r._native.propset_Certificate(t.GetNative()),r.plugin.CreateObject("CAdESCOM.CadesSignedData").then(function(t){t.propset_Content(e),t.SignCades(r._native,1,n,0).then(function(e){i.resolve(e)},function(e){i.reject(e)})},function(e){i.reject(e)})):(r._native.Certificate=t.GetNative(),r.plugin.CreateObject("CAdESCOM.CadesSignedData").then(function(t){try{t.Content=e;var o=t.SignCades(r._native,1,n,0);i.resolve(o)}catch(s){i.reject(s)}},function(e){i.reject(e)})),i.promise},t.prototype.SetCertificate=function(e){this.plugin.IsAsync?this._native.propset_Certificate(e.GetNative()):this._native.Certificate=e.GetNative()},t.prototype.CoSign=function(e){var t=this,n=t.plugin.GetQService().defer();return t.plugin.IsAsync?(t._native.propset_Certificate(e.GetNative()),t.plugin.CreateObject("CAdESCOM.CadesSignedData").then(function(e){e.propset_ContentEncoding(1),e.CoSignCades(t._native,0,0).then(function(e){n.resolve(e)},function(e){n.reject(e)})},function(e){n.reject(e)})):(t._native.Certificate=e.GetNative(),t.plugin.CreateObject("CAdESCOM.CadesSignedData").then(function(e){try{e.ContentEncoding=1;var r=e.CoSignCades(t._native,0,0);n.resolve(r)}catch(i){n.reject(i)}},function(e){n.reject(e)})),n.promise},t.Create=function(t,n){var r=t.GetQService().defer(),i=null;try{t.CreateObject("CAdESCOM.CPSigner").then(function(o){i=new e.Pkcs.CmsSigner(t,o),n&&(t.IsAsync?o.propset_Options(n):o.Options=n),r.resolve(i)})}catch(o){r.reject(o)}return r.promise},t}());t.CmsSigner=n}(t=e.Pkcs||(e.Pkcs={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(t){var n=function(){function t(e,t){this.plugin=e,this._native=t}return t.prototype.Decrypt=function(e){var t=this,n=this.plugin.GetQService().defer();if(this.plugin.IsAsync)this._native.propset_ContentEncoding(1).then(function(){t._native.Decrypt(e).then(function(e){t._native.Content.then(function(e){n.resolve(e)})["catch"](function(e){n.reject(e)})})["catch"](function(e){n.reject(e)})})["catch"](function(e){n.reject(e)});else try{this._native.ContentEncoding=1,this._native.Decrypt(e);var r=this._native.Content;n.resolve(r)}catch(i){n.reject(i)}return n.promise},t.Create=function(t){var n=t.GetQService().defer();
try{t.CreateObject("CAdESCOM.CPEnvelopedData").then(function(r){var i=new e.Pkcs.EnvelopedCms(t,r);n.resolve(i)},function(e){n.reject(e)})}catch(r){n.reject(r)}return n.promise},t}();t.EnvelopedCms=n}(t=e.Pkcs||(e.Pkcs={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(t){var n=function(){function n(e,t){this.plugin=e,this._native=t}return n.prototype.Sign=function(e,t,n){var r=this;void 0===n&&(n=!1);return this.GetCmsSigner(t).then(function(t){if(r.plugin.IsAsync)return r._native.propset_Content(e),r._native.SignCades(t._native,1,n,0);try{r._native.Content=e;var i=r._native.SignCades(t._native,1,n,0);return r.plugin.GetQService().resolve(i)}catch(o){return r.plugin.GetQService().reject(o)}})},n.prototype.CoSign=function(e){var t=this;return this.GetCmsSigner(e).then(function(e){if(t.plugin.IsAsync)return t._native.CoSignCades(e._native,1,0);try{var n=t._native.CoSignCades(e._native,1,0);return t.plugin.GetQService().resolve(n)}catch(r){return t.plugin.GetQService().reject(n)}})},n.prototype.Verify=function(e){if(this.plugin.IsAsync)return this._native.VerifyCades(e,1,!1);try{return this.plugin.GetQService().resolve(this._native.VerifyCades(e,1,!1))}catch(t){return this.plugin.GetQService().reject(t)}},n.prototype.SetOptions=function(e){this.plugin.IsAsync?this._native.propset_ContentEncoding(e.ContentEncoding):this._native.ContentEncoding=e.ContentEncoding},n.prototype.GetCmsSigner=function(e){return t.CmsSigner.Create(this.plugin).then(function(t){return t.SetCertificate(e),t})},n.Create=function(t,n,r){t.GetQService().defer();try{return t.CreateObject("CAdESCOM.CadesSignedData").then(function(i){var o=new e.Pkcs.SignedCms(t,i);return r&&o.SetOptions(r),n&&o.Verify(n).then(function(e){return o})["catch"](function(e){return console.error(e),o}),o})}catch(i){return t.GetQService().reject(i)}},n}();t.SignedCms=n}(t=e.Pkcs||(e.Pkcs={}))}(Cryptography||(Cryptography={}));var System;!function(e){var t=function(){function e(e,t,n,r){if("string"==typeof e){var i=e.split(".");this.Major=parseInt(i[0],10),this.Minor=i[1]?parseInt(i[1],10):0,this.Patch=i[2]?parseInt(i[2],10):0,this.Metadata=i[3]?i[3]:void 0}else this.Major=window.parseInt(e,10),this.Minor=t?window.parseInt(t,10):0,this.Patch=n?window.parseInt(n,10):0,this.Metadata=r}return e.prototype.toString=function(){var e="";return e+=this.hasValue(this.Major)?this.Major:".",e+=this.hasValue(this.Minor)?"."+this.Minor:".",this.hasValue(this.Patch)&&(e+="."+this.Patch),this.hasValue(this.Metadata)&&"."!==e&&".."!==e&&"..."!==e?e+="-"+this.Metadata:e=null,(""===e||"."===e||".."===e||"..."===e)&&(e=null),e},e.prototype.hasValue=function(e){return void 0!=e&&null!=e&&e.toString().length>0},e.compare=function(e,t){var n=function(e,t){return e==t?0:e>t?1:t>e?-1:void 0};if(!e&&!t)return 0;if(e&&!t)return 1;if(t&&!e)return-1;var r=n(e.Major,t.Major);if(0!=r)return r;var i=n(e.Minor,t.Minor);if(0!=i)return i;var o=n(e.Patch,t.Patch);return 0!=o?o:0},e}();e.SemVer=t}(System||(System={}));var Cryptography;!function(e){var t;!function(t){!function(e){e[e.IssuerName=2]="IssuerName",e[e.Thumbprint=0]="Thumbprint",e[e.TimeValid=9]="TimeValid",e[e.Policy=8]="Policy",e[e.Serial=-1]="Serial"}(t.X509CertificateFind||(t.X509CertificateFind={}));var n=t.X509CertificateFind,r=function(){function t(e,t){this.plugin=e,this._native=t,this.Items=[]}return t.prototype.NativeItem=function(t){var n=this,r=this.plugin.GetQService().defer();if(this.plugin.IsAsync)try{this._native.Item(t).then(function(t){e.X509Certificate.X509Certificate.Create(n.plugin,t).then(function(e){r.resolve(e)})})}catch(i){r.reject(i)}else try{var o=this._native.Item(t);e.X509Certificate.X509Certificate.Create(n.plugin,o).then(function(e){r.resolve(e)})}catch(i){r.reject(i)}return r.promise},t.prototype.Item=function(e){return this.Items},t.prototype.Count=function(){return this.Items.length},t.prototype.Find=function(e,t){var r=[];if(this.Items){var i=null;switch(t){case n.IssuerName:i="IssuerName";break;case n.Thumbprint:"string"==typeof e&&(e=e.replace(" ","").toUpperCase()),i="Thumbprint";break;case n.Serial:"string"==typeof e&&(e=e.replace(" ","").toUpperCase()),i="SerialNumber"}for(var o=0;o<this.Items.length;o++){var s=this.Items[o];if(s[i]){var a=!1;"string"==typeof e?a=s[i].toString()==e:e instanceof RegExp&&(a=s[i].toString().match(e)),a&&r.push(s)}}}return r},t.Create=function(t,n){var r=t.GetQService().defer(),i=new e.X509Certificate.X509CertificateCollection(t,n);if(t.IsAsync)n.Count.then(function(o){for(var s=o,a=[],c=1;s>=c;c++)a.push(e.X509Certificate.X509CertificateCollection.AddIntoCollection(t,i.Items,n.Item(c)));t.GetQService().all(a)["finally"](function(){r.resolve(i)})});else{for(var o=[],s=1;s<=n.Count;s++)o.push(e.X509Certificate.X509CertificateCollection.AddIntoCollection(t,i.Items,n.Item(s)));t.GetQService().all(o)["finally"](function(){r.resolve(i)})}return r.promise},t.AddIntoCollection=function(t,n,r){var i=t.GetQService().defer();return e.X509Certificate.X509Certificate.Create(t,r).then(function(e){n.push(e),i.resolve(e)}),i.promise},t}();t.X509CertificateCollection=r}(t=e.X509Certificate||(e.X509Certificate={}))}(Cryptography||(Cryptography={}));var System;!function(e){var t;!function(t){var n=function(){function t(){}return t.stringToBytes=function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},t.bytesToString=function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")},t.rotateToLeft=function(e,t){return e<<t|e>>>32-t},t.rotateToRight=function(e,t){return e<<32-t|e>>>t},t.endian=function(t){if(t.constructor==Number)return 16711935&e.Binary.Converter.rotateToLeft(t,8)|4278255360&e.Binary.Converter.rotateToLeft(t,24);for(var n=t,r=0;r<n.length;r++)n[r]=e.Binary.Converter.endian(t[r]);return n},t.randomBytes=function(e){e||(e=1);for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},t.bytesToWords=function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},t.wordsToBytes=function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},t.bytesToHex=function(e,t){t=t||"";for(var n=t&&1==t.length,r=[],i=0;i<e.length;i++)r.push((e[i]>>>4).toString(16)),r.push((15&e[i]).toString(16)),n&&r.push(":");return r.pop(),r.join("")},t.stringToHex=function(t,n){var r=e.Binary.Converter.stringToBytes(t);return e.Binary.Converter.bytesToHex(r,n)},t.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},t.bytesToBase64=function(t){if("function"==typeof btoa)return btoa(e.Binary.Converter.bytesToString(t));for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;4>o;o++)8*r+6*o<=8*t.length?n.push(e.Binary.Converter.base64map.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},t.stringToBase64=function(e){if("function"==typeof btoa)return btoa(e);var n=t.stringToBytes(e);return t.bytesToBase64(n)},t.base64ToBytes=function(t){if(t=t.replace(/\s/g,""),"function"==typeof atob)return e.Binary.Converter.stringToBytes(atob(t));t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.Binary.Converter.base64map.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.Binary.Converter.base64map.indexOf(t.charAt(r))>>>6-2*i);return n},t.UTF8StringToBytes=function(t){return e.Binary.Converter.stringToBytes(window.unescape(encodeURIComponent(t)))},t.UTF8BytesToString=function(t){return decodeURIComponent(window.escape(e.Binary.Converter.bytesToString(t)))},t.prototype.stringToBase64String=function(t){var n=e.Binary.Converter.UTF8StringToBytes(t);return e.Binary.Converter.bytesToBase64(n)},t.base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t}();t.Converter=n}(t=e.Binary||(e.Binary={}))}(System||(System={}));var Cryptography;!function(e){var t;!function(e){!function(e){e[e.XCN_CRYPT_STRING_BASE64HEADER=0]="XCN_CRYPT_STRING_BASE64HEADER",e[e.XCN_CRYPT_STRING_BASE64=1]="XCN_CRYPT_STRING_BASE64",e[e.XCN_CRYPT_STRING_BINARY=2]="XCN_CRYPT_STRING_BINARY",e[e.XCN_CRYPT_STRING_BASE64REQUESTHEADER=3]="XCN_CRYPT_STRING_BASE64REQUESTHEADER",e[e.XCN_CRYPT_STRING_HEX=4]="XCN_CRYPT_STRING_HEX",e[e.XCN_CRYPT_STRING_HEXASCII=5]="XCN_CRYPT_STRING_HEXASCII",e[e.XCN_CRYPT_STRING_BASE64_ANY=6]="XCN_CRYPT_STRING_BASE64_ANY",e[e.XCN_CRYPT_STRING_ANY=7]="XCN_CRYPT_STRING_ANY",e[e.XCN_CRYPT_STRING_HEX_ANY=8]="XCN_CRYPT_STRING_HEX_ANY",e[e.XCN_CRYPT_STRING_BASE64X509CRLHEADER=9]="XCN_CRYPT_STRING_BASE64X509CRLHEADER",e[e.XCN_CRYPT_STRING_HEXADDR=10]="XCN_CRYPT_STRING_HEXADDR",e[e.XCN_CRYPT_STRING_HEXASCIIADDR=11]="XCN_CRYPT_STRING_HEXASCIIADDR",e[e.XCN_CRYPT_STRING_HEXRAW=12]="XCN_CRYPT_STRING_HEXRAW",e[e.XCN_CRYPT_STRING_NOCRLF=1073741824]="XCN_CRYPT_STRING_NOCRLF",e[e.XCN_CRYPT_STRING_NOCR=2147483648]="XCN_CRYPT_STRING_NOCR"}(e.X509EnrollmentEncodingType||(e.X509EnrollmentEncodingType={}));var t=e.X509EnrollmentEncodingType;!function(e){e[e.User=1]="User",e[e.Machine=2]="Machine"}(e.X509EnrollmentContext||(e.X509EnrollmentContext={}));var n=(e.X509EnrollmentContext,function(){function e(e){this.plugin=e}return e.prototype.Create=function(e){var t,n,r,i=this;return this.plugin.IsAsync?i.InitPrivateKey(e).then(function(e){return n=e,i.plugin.CreateObject("X509Enrollment.CX509CertificateRequestPkcs10")}).then(function(r){return t=r,r.InitializeFromPrivateKey(e.MachineContext?2:1,n,"")}).then(function(n){return i.LimitExchangeKeyToEncipherment(t,!1,e.KeySpec)}).then(function(n){return i.AddDistinguishedName(t,e.Subject)}).then(function(n){return i.AddEKUToRequest(t,e.EKUS)}).then(function(n){return i.SetHashAlgorithm(t,e.HashAlgoritmOID)}).then(function(e){return i.InitializeFromRequest(t)}).then(function(n){return r=n,i.AddTemplateExtension(t,e.Template)}).then(function(){return i.AddCSPName(t,{name:e.ProviderPublicName,version:e.ProviderVersion})}).then(function(){return e.TemplateData?i.AddCertType(t,e.TemplateData).then(function(e){return i.CreateRequest(r)}):i.CreateRequest(r)}):i.InitPrivateKey(e).then(function(e){return n=e,i.plugin.CreateObject("X509Enrollment.CX509CertificateRequestPkcs10")}).then(function(r){return t=r,r.InitializeFromPrivateKey(e.MachineContext?2:1,n,"")}).then(function(n){return i.LimitExchangeKeyToEncipherment(t,!1,e.KeySpec)}).then(function(n){return i.AddDistinguishedName(t,e.Subject)}).then(function(n){return i.AddEKUToRequest(t,e.EKUS)}).then(function(n){return i.SetHashAlgorithm(t,e.HashAlgoritmOID)}).then(function(){return i.AddTemplateExtension(t,e.Template)}).then(function(){return i.AddCSPName(t,{name:e.ProviderPublicName,version:e.ProviderVersion})}).then(function(e){return i.InitializeFromRequest(t)}).then(function(n){return r=n,e.TemplateData?i.AddCertType(t,e.TemplateData).then(function(e){return i.CreateRequest(r)}):i.CreateRequest(r)})},e.prototype.Install=function(e,n,r){void 0===r&&(r="");var i,o=this;return o.plugin.IsAsync?o.plugin.CreateObject("X509Enrollment.CX509Enrollment").then(function(e){return i=e,i.Initialize(n)}).then(function(n){return i.InstallResponse(0,e,t.XCN_CRYPT_STRING_ANY,r)}).then(function(){return!0}):o.plugin.CreateObject("X509Enrollment.CX509Enrollment").then(function(s){i=s;try{return s.Initialize(n),s.InstallResponse(0,e,t.XCN_CRYPT_STRING_ANY,r),!0}catch(a){return o.plugin.GetQService().reject(a)}})},e.prototype.VerifyPKCS10=function(e){var t=!0,n=e;n=n.replace("-----BEGIN NEW CERTIFICATE REQUEST-----\r\n",""),n=n.replace("-----END NEW CERTIFICATE REQUEST-----\r\n",""),n=n.replace("\r\n","");var r=System.Binary.Converter.base64ToBytes(n);if(r.length>0){var i=System.Binary.Converter.bytesToHex(r);if(null!=i&&i.length>0){var o=i.indexOf("06052a85036403"),s=i.indexOf("06052a85036401"),a=i.indexOf("06052a85036405");o>-1&&"12"!==i.substr(o+14,2)&&(t=!1),s>-1&&"12"!==i.substr(s+14,2)&&(t=!1),a>-1&&"12"!==i.substr(a+14,2)&&(t=!1)}else t=!1}else t=!1;return t},e.prototype.InitPrivateKey=function(e){var t=2,n=1,r=1,i=0,o=1;return this.plugin.IsAsync?this.plugin.CreateObject("X509Enrollment.CX509PrivateKey").then(function(s){return s.propset_ProviderName(null!=e.ProviderName?e.ProviderName:""),s.propset_ProviderType(e.ProviderType),s.propset_KeySpec(e.KeySpec),e.ContainerName&&e.ContainerName.length>0&&s.propset_ContainerName(e.ContainerName),s.propset_KeyProtection(t&(0!=e.KeyGenFlags?r:i)),s.propset_ExportPolicy(n&(0!=e.KeyGenFlags?o:0)),s.propset_Length(e.KeyGenFlags>>16),s.propset_MachineContext(e.MachineContext?e.MachineContext:!1),s}):this.plugin.CreateObject("X509Enrollment.CX509PrivateKey").then(function(s){return s.ProviderName=null!=e.ProviderName?e.ProviderName:"",s.ProviderType=e.ProviderType,s.KeySpec=e.KeySpec,e.ContainerName&&e.ContainerName.length>0&&(s.ContainerName=e.ContainerName),s.KeyProtection=t&(0!=e.KeyGenFlags?r:i),s.ExportPolicy=n&(0!=e.KeyGenFlags?o:0),s.Length=e.KeyGenFlags>>16,s.MachineContext=e.MachineContext?e.MachineContext:!1,s})},e.prototype.LimitExchangeKeyToEncipherment=function(e,t,n){var r,i=this,o=128,s=64,a=32,c=16,u=0;return u=2==n?o|s:t?a|c:a|c|o|s,this.plugin.IsAsync?i.plugin.CreateObject("X509Enrollment.CX509ExtensionKeyUsage").then(function(e){return r=e,e.InitializeEncode(u)}).then(function(t){return e.X509Extensions}).then(function(e){return e.Add(r)}):i.plugin.CreateObject("X509Enrollment.CX509ExtensionKeyUsage").then(function(t){return t.InitializeEncode(u),e.X509Extensions.Add(t)})},e.prototype.AddDistinguishedName=function(e,t){var n=this,r=16777216;return n.plugin.IsAsync?n.plugin.CreateObject("X509Enrollment.CX500DistinguishedName").then(function(n){return n.Encode(t,r).then(function(t){return e.propset_Subject(n)})}):n.plugin.CreateObject("X509Enrollment.CX500DistinguishedName").then(function(n){n.Encode(t,r),e.Subject=n})},e.prototype.AddEKUToRequest=function(e,t){var n=this,r=null;r="string"==typeof t?t.split(","):t;var i=!1,o=!1,s="1.3.6.1.4.1.311.2.1.21",a="1.3.6.1.4.1.311.2.1.22",c="1.3.6.1.5.5.7.3.3";return n.plugin.IsAsync?n.plugin.CreateObject("X509Enrollment.CObjectIds").then(function(t){var u=[];if(r)for(var l=0;l<r.length;l++){var p=r[l];(p===s||p===a)&&(o=!0),p===c&&(i=!0);var h=n.AddEku(t,p);u.push(h)}return n.plugin.GetQService().all(u)["finally"](function(){return o&&!i?n.plugin.CreateObject("X509Enrollment.CObjectId").then(function(r){return r.InitializeFromValue(c).then(function(i){return t.Add(r).then(function(r){return n.plugin.CreateObject("X509Enrollment.CX509ExtensionEnhancedKeyUsage").then(function(n){return n.InitializeEncode(t).then(function(t){return e.X509Extensions.then(function(e){return e.Add(n)})})})})})}):n.plugin.CreateObject("X509Enrollment.CX509ExtensionEnhancedKeyUsage").then(function(n){return n.InitializeEncode(t).then(function(t){return e.X509Extensions.then(function(e){return e.Add(n)})})})})}):n.plugin.CreateObject("X509Enrollment.CObjectIds").then(function(t){if(r){for(var u=[],l=0;l<r.length;l++){var p=r[l];(p===s||p===a)&&(o=!0),p===c&&(i=!0);var h=n.AddEku(t,p);u.push(h)}return n.plugin.GetQService().all(u)["finally"](function(){return o&&!i?n.plugin.CreateObject("X509Enrollment.CObjectId").then(function(r){return r.InitializeFromValue(c),t.Add(r),n.plugin.CreateObject("X509Enrollment.CX509ExtensionEnhancedKeyUsage").then(function(n){n.InitializeEncode(t),e.X509Extensions.Add(n)})}):n.plugin.CreateObject("X509Enrollment.CX509ExtensionEnhancedKeyUsage").then(function(n){n.InitializeEncode(t),e.X509Extensions.Add(n)})})}})},e.prototype.AddEku=function(e,t){var n=this,r=n.plugin.GetQService().defer();return n.plugin.IsAsync?n.plugin.CreateObject("X509Enrollment.CObjectId").then(function(n){n.InitializeFromValue(t).then(function(t){e.Add(n),r.resolve(n)},r.reject)},r.reject):n.plugin.CreateObject("X509Enrollment.CObjectId").then(function(n){try{n.InitializeFromValue(t),e.Add(n),r.resolve(n)}catch(i){r.reject(i)}},r.reject),r.promise},e.prototype.SetHashAlgorithm=function(e,t){var n=this;return n.plugin.IsAsync?n.plugin.CreateObject("X509Enrollment.CObjectId").then(function(n){return n.InitializeFromValue(t).then(function(t){e.propset_HashAlgorithm(n)})}):n.plugin.CreateObject("X509Enrollment.CObjectId").then(function(n){n.InitializeFromValue(t),e.HashAlgorithm=n})},e.prototype.InitializeFromRequest=function(e){var t=this;return t.plugin.IsAsync?t.plugin.CreateObject("X509Enrollment.CX509Enrollment").then(function(t){return t.InitializeFromRequest(e).then(function(e){return t})}):t.plugin.CreateObject("X509Enrollment.CX509Enrollment").then(function(t){return t.InitializeFromRequest(e),t})},e.prototype.AddCertType=function(e,t){var n=this;return n.plugin.IsAsync?n.plugin.CreateObject("X509Enrollment.CX509ExtensionTemplateName").then(function(n){return n.InitializeEncode(t).then(function(t){return e.X509Extensions.then(function(e){return e.Add(n)})})}):n.plugin.CreateObject("X509Enrollment.CX509ExtensionTemplateName").then(function(n){n.InitializeEncode(t),e.X509Extensions.Add(n)})},e.prototype.AddTemplateExtension=function(e,t){var n=this;if(t){if(n.plugin.IsAsync)return n.plugin.CreateObject("X509Enrollment.CObjectId").then(function(r){return r.InitializeFromValue(t.Oid).then(function(i){return n.plugin.CreateObject("X509Enrollment.CX509ExtensionTemplate").then(function(n){return n.InitializeEncode(r,t.MajorVersion||1,t.MinorVersion||0).then(function(t){return e.X509Extensions.then(function(e){return e.Add(n)})})})})});var r=n.plugin.GetQService().defer();return n.plugin.CreateObject("X509Enrollment.CObjectId").then(function(i){try{i.InitializeFromValue(t.Oid),n.plugin.CreateObject("X509Enrollment.CX509ExtensionTemplate").then(function(n){n.InitializeEncode(i,t.MajorVersion||1,t.MinorVersion||0),e.X509Extensions.Add(n),r.resolve()})}catch(o){r.reject(o)}},r.reject),r.promise}var r=n.plugin.GetQService().defer();return r.resolve(),r.promise},e.prototype.AddCSPName=function(e,n){var r,i,o=this;if(!n||!n.name)return o.plugin.GetQService().resolve();n.version&&n.version.Major&&(n.name="Средство криптографической защиты информации "+n.name+" "+n.version.Major+"."+n.version.Minor);try{return o.plugin.GetQService().all([o.plugin.CreateObject("X509Enrollment.CX509Extension"),o.plugin.CreateObject("X509Enrollment.CObjectId")]).then(function(e){return r=e[0],i=e[1],i.InitializeFromValue("1.2.643.100.111")}).then(function(){var e=n.name.slice(0,127),o=System.Binary.Converter.UTF8StringToBytes(e),s=12;o.unshift(s,o.length);var a=btoa(String.fromCharCode.apply(null,new Uint8Array(o)));return r.Initialize(i,t.XCN_CRYPT_STRING_BASE64,a)}).then(function(){return e.X509Extensions}).then(function(e){return e.Add(r)})}catch(s){o.plugin.GetQService().reject(s)}},e.prototype.CreateRequest=function(e,n){var r=this,i=r.plugin.GetQService().defer();if(n||(n=t.XCN_CRYPT_STRING_BASE64|t.XCN_CRYPT_STRING_NOCRLF),r.plugin.IsAsync)e.CreateRequest(n).then(function(e){i.resolve(e)},function(e){i.reject(e)});else try{var o=e.CreateRequest(n);i.resolve(o)}catch(s){i.reject(s)}return i.promise},e}());e.X509Enrollment=n}(t=e.X509Certificate||(e.X509Certificate={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(e){var t=function(){function e(e,t){if(this.plugin=e,!t)throw{message:"Argumant privateKey is empty"};this._native=t}return e}();e.PrivateKey=t}(t=e.X509Certificate||(e.X509Certificate={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(t){!function(e){e[e.CurrentUser=2]="CurrentUser",e[e.LocalMachine=1]="LocalMachine"}(t.X509StoreLocation||(t.X509StoreLocation={}));var n=t.X509StoreLocation;!function(e){e[e.AddressBook="AddressBook"]="AddressBook",e[e.AuthRoot="AuthRoot"]="AuthRoot",e[e.CertificateAuthority="CertificateAuthority"]="CertificateAuthority",e[e.Disallowed="Disallowed"]="Disallowed",e[e.My="My"]="My",e[e.Root="Root"]="Root",e[e.TrustedPeople="TrustedPeople"]="TrustedPeople",e[e.TrustedPublisher="TrustedPublisher"]="TrustedPublisher"}(t.X509StoreName||(t.X509StoreName={}));t.X509StoreName;!function(e){e[e.IncludeArchived=256]="IncludeArchived",e[e.MaxAllowed=2]="MaxAllowed",e[e.OpenExistingOnly=128]="OpenExistingOnly",e[e.ReadOnly=0]="ReadOnly",e[e.ReadWrite=1]="ReadWrite"}(t.X509StoreOpenFlags||(t.X509StoreOpenFlags={}));var r=t.X509StoreOpenFlags,i=function(){function i(e,t,r,i){if(void 0===i&&(i=n.CurrentUser),this.plugin=e,this.storeName=r,this.storeLocation=i,!e)throw{message:"Empty argument: plugin"};this._native=t}return i.prototype.GetNative=function(){var e=this.plugin.GetQService().defer(),t=this;return this.plugin.CreateObject("CAdESCOM.store").then(function(n){t._native=n,e.resolve(t)},function(n){t._native=null,e.reject(n)}),e.promise},i.prototype.Open=function(e){void 0===e&&(e=r.ReadOnly);var t=this.plugin.GetQService().defer(),n=this;if(this._native)if(this.plugin.IsAsync)this._native.Open(this.storeLocation,this.storeName,e).then(function(e){t.resolve(n)},function(e){return t.reject(e)});else try{n._native.Open(this.storeLocation,this.storeName,e),t.resolve(n)}catch(i){t.reject(i)}else t.reject({message:"Native store is empty"});return t.promise},i.prototype.Close=function(){this._native&&this._native.Close()},i.prototype.GetLocation=function(){return this.storeLocation},i.prototype.GetName=function(){return this.storeName},i.prototype.Add=function(e){},i.prototype.Remove=function(e){},i.prototype.Certificates=function(){var t=this,n=this.plugin.GetQService().defer();return this._native?this.plugin.IsAsync?this._native.Certificates.then(function(r){e.X509Certificate.X509CertificateCollection.Create(t.plugin,r).then(function(e){n.resolve(e)})}):e.X509Certificate.X509CertificateCollection.Create(t.plugin,this._native.Certificates).then(function(e){n.resolve(e)}):n.reject({message:"Native store is empty"}),n.promise},i.prototype.FindCertificate=function(e,n){var r=this;if(r.plugin.IsAsync)return r._native.Find(e,n).then(function(e){return t.X509CertificateCollection.Create(r.plugin,e)});var i=r._native.Find(e,n);return t.X509CertificateCollection.Create(r.plugin,i)},i.Create=function(e,t,r){return void 0===t&&(t="My"),void 0===r&&(r=n.CurrentUser),e.CreateObject("CAdESCOM.store").then(function(n){var o=new i(e,n,t,r);return o})},i.Open=function(e,t,o,s){return void 0===t&&(t="My"),void 0===o&&(o=n.CurrentUser),void 0===s&&(s=r.ReadOnly),e instanceof i?e.Open(s):i.Create(e,t,o).then(function(e){return e.Open(s)})},i}();t.X509Store=i}(t=e.X509Certificate||(e.X509Certificate={}))}(Cryptography||(Cryptography={}));var Cryptography;!function(e){var t;!function(t){var n=function(){function t(e,t){this.plugin=e,this._native=t}return t.prototype.ComputeSignature=function(e,t,n){var r="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411",i="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411",o=this;return o.plugin.IsAsync?o.plugin.CreateObject("CAdESCOM.CPSigner").then(function(n){return n.propset_Certificate(t.GetNative()),o._native.propset_Content(e),o._native.propset_SignatureType(2),o._native.propset_SignatureMethod(r),o._native.propset_DigestMethod(i),o._native.Sign(n).then(function(e){return e})}):o.plugin.CreateObject("CAdESCOM.CPSigner").then(function(n){return n.Certificate=t.GetNative(),o._native.Content=e,o._native.SignatureType=2,o._native.SignatureMethod=r,o._native.DigestMethod=i,o._native.Sign(n)})},t.Create=function(t){return t.CreateObject("CAdESCOM.SignedXML").then(function(n){var r=new e.Xml.XmlSigner(t,n);return r})},t}();t.XmlSigner=n}(t=e.Xml||(e.Xml={}))}(Cryptography||(Cryptography={}));var System;!function(e){var t;!function(e){var t=function(){function e(){var e=[];e.BOOLEAN=1,e.INTEGER=2,e.BITSTRING=3,e.OCTETSTRING=4,e.NULL=5,e.OBJECTIDENTIFIER=6,e.ObjectDescripter=7,e.UTF8String=12,e.SEQUENCE=16,e.SET=17,e.NumericString=18,e.PrintableString=19,e.TeletexString=20,e.IA5String=22,e.UTCTime=23,e.GeneralizedTime=24,e.Undefined=30,this.NAME=[];for(var t in e)this.NAME[e[t]]=t;this.OID=[],this.OID["0.2.262.1.10.0"]="extension",this.OID["0.2.262.1.10.1.1"]="signature",this.OID["1.2.840.113549.1.1"]="pkcs - 1",this.OID["1.2.840.113549.1.1.1"]="rsaEncryption",this.OID["1.2.840.113549.1.1.4"]="md5withRSAEncryption",this.OID["1.2.840.113549.1.1.5"]="sha1withRSAEncryption",this.OID["1.2.840.113549.1.1.6"]="rsaOAEPEncryptionSET",this.OID["1.2.840.113549.1.7"]="pkcs - 7",this.OID["1.2.840.113549.1.7.1"]="data",this.OID["1.2.840.113549.1.7.2"]="signedData",this.OID["1.2.840.113549.1.7.3"]="envelopedData",this.OID["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",this.OID["1.2.840.113549.1.7.5"]="digestedData",this.OID["1.2.840.113549.1.7.6"]=" encryptedData",this.OID["1.2.840.113549.1.7.7"]=" dataWithAttributes",this.OID["1.2.840.113549.1.7.8"]=" encryptedPrivateKeyInfo",this.OID["1.2.840.113549.1.9.22.1"]=" x509Certificate(for.PKCS.#12)",this.OID["1.2.840.113549.1.9.23.1"]=" x509Crl(for.PKCS.#12)",this.OID["1.2.840.113549.1.9.3"]=" contentType",this.OID["1.2.840.113549.1.9.4"]=" messageDigest",this.OID["1.2.840.113549.1.9.5"]=" signingTime",this.OID["2.16.840.1.113730.1"]=" cert - extension",this.OID["2.16.840.1.113730.1.1"]=" netscape - cert - type",this.OID["2.16.840.1.113730.1.12"]=" netscape - ssl - server - name",this.OID["2.16.840.1.113730.1.13"]=" netscape - comment",this.OID["2.16.840.1.113730.1.2"]=" netscape - base - url",this.OID["2.16.840.1.113730.1.3"]=" netscape - revocation - url",this.OID["2.16.840.1.113730.1.4"]=" netscape - ca - revocation - url",this.OID["2.16.840.1.113730.1.7"]=" netscape - cert - renewal - url",this.OID["2.16.840.1.113730.1.8"]=" netscape - ca - policy - url",this.OID["2.23.42.0"]=" contentType",this.OID["2.23.42.1"]=" msgExt",this.OID["2.23.42.10"]=" national",this.OID["2.23.42.2"]=" field",this.OID["2.23.42.2.0"]=" fullName",this.OID["2.23.42.2.1"]=" givenName",this.OID["2.23.42.2.10"]=" amount",this.OID["2.23.42.2.2"]=" familyName",this.OID["2.23.42.2.3"]=" birthFamilyName",this.OID["2.23.42.2.4"]=" placeName",this.OID["2.23.42.2.5"]=" identificationNumber",this.OID["2.23.42.2.6"]=" month",this.OID["2.23.42.2.7"]=" date",this.OID["2.23.42.2.7.11"]=" accountNumber",this.OID["2.23.42.2.7.12"]=" passPhrase",this.OID["2.23.42.2.8"]=" address",this.OID["2.23.42.3"]=" attribute",this.OID["2.23.42.3.0"]=" cert",this.OID["2.23.42.3.0.0"]=" rootKeyThumb",this.OID["2.23.42.3.0.1"]=" additionalPolicy",this.OID["2.23.42.4"]=" algorithm",this.OID["2.23.42.5"]=" policy",this.OID["2.23.42.5.0"]=" root",this.OID["2.23.42.6"]=" module",this.OID["2.23.42.7"]=" certExt",this.OID["2.23.42.7.0"]=" hashedRootKey",this.OID["2.23.42.7.1"]=" certificateType",this.OID["2.23.42.7.2"]=" merchantData",this.OID["2.23.42.7.3"]=" cardCertRequired",this.OID["2.23.42.7.5"]=" setExtensions",this.OID["2.23.42.7.6"]=" setQualifier",this.OID["2.23.42.8"]=" brand",this.OID["2.23.42.9"]=" vendor",this.OID["2.23.42.9.22"]=" eLab",this.OID["2.23.42.9.31"]=" espace - net",this.OID["2.23.42.9.37"]=" e - COMM",this.OID["2.5.29.1"]=" authorityKeyIdentifier",this.OID["2.5.29.10"]=" basicConstraints",this.OID["2.5.29.11"]=" nameConstraints",this.OID["2.5.29.12"]=" policyConstraints",this.OID["2.5.29.13"]=" basicConstraints",this.OID["2.5.29.14"]=" subjectKeyIdentifier",this.OID["2.5.29.15"]=" keyUsage",this.OID["2.5.29.16"]=" privateKeyUsagePeriod",this.OID["2.5.29.17"]=" subjectAltName",this.OID["2.5.29.18"]=" issuerAltName",this.OID["2.5.29.19"]=" basicConstraints",this.OID["2.5.29.2"]=" keyAttributes",this.OID["2.5.29.20"]=" cRLNumber",this.OID["2.5.29.21"]=" cRLReason",this.OID["2.5.29.22"]=" expirationDate",this.OID["2.5.29.23"]=" instructionCode",this.OID["2.5.29.24"]=" invalidityDate",this.OID["2.5.29.25"]=" cRLDistributionPoints",this.OID["2.5.29.26"]=" issuingDistributionPoint",this.OID["2.5.29.27"]=" deltaCRLIndicator",this.OID["2.5.29.28"]=" issuingDistributionPoint",this.OID["2.5.29.29"]=" certificateIssuer",this.OID["2.5.29.3"]=" certificatePolicies",this.OID["2.5.29.30"]=" nameConstraints",this.OID["2.5.29.31"]=" cRLDistributionPoints",this.OID["2.5.29.32"]=" certificatePolicies",this.OID["2.5.29.33"]=" policyMappings",this.OID["2.5.29.34"]=" policyConstraints",this.OID["2.5.29.35"]=" authorityKeyIdentifier",this.OID["2.5.29.36"]=" policyConstraints",this.OID["2.5.29.37"]=" extKeyUsage",this.OID["2.5.29.4"]=" keyUsageRestriction",this.OID["2.5.29.5"]=" policyMapping",this.OID["2.5.29.6"]=" subtreesConstraint",this.OID["2.5.29.7"]=" subjectAltName",this.OID["2.5.29.8"]=" issuerAltName",this.OID["2.5.29.9"]=" subjectDirectoryAttributes",this.OID["2.5.4.0"]=" objectClass",this.OID["2.5.4.1"]=" aliasedEntryName",this.OID["2.5.4.10"]=" organizationName",this.OID["2.5.4.10.1"]=" collectiveOrganizationName",this.OID["2.5.4.11"]=" organizationalUnitName",this.OID["2.5.4.11.1"]=" collectiveOrganizationalUnitName",this.OID["2.5.4.12"]=" title",this.OID["2.5.4.13"]=" description",this.OID["2.5.4.14"]=" searchGuide",this.OID["2.5.4.15"]=" businessCategory",this.OID["2.5.4.16"]=" postalAddress",this.OID["2.5.4.16.1"]=" collectivePostalAddress",this.OID["2.5.4.17"]=" postalCode",this.OID["2.5.4.17.1"]=" collectivePostalCode",this.OID["2.5.4.18"]=" postOfficeBox",this.OID["2.5.4.18.1"]=" collectivePostOfficeBox",this.OID["2.5.4.19"]=" physicalDeliveryOfficeName",this.OID["2.5.4.19.1"]=" collectivePhysicalDeliveryOfficeName",this.OID["2.5.4.2"]=" knowledgeInformation",this.OID["2.5.4.20"]=" telephoneNumber",this.OID["2.5.4.20.1"]=" collectiveTelephoneNumber",this.OID["2.5.4.21"]=" telexNumber",this.OID["2.5.4.21.1"]=" collectiveTelexNumber",this.OID["2.5.4.22.1"]=" collectiveTeletexTerminalIdentifier",this.OID["2.5.4.23"]=" facsimileTelephoneNumber",this.OID["2.5.4.23.1"]=" collectiveFacsimileTelephoneNumber",this.OID["2.5.4.25"]=" internationalISDNNumber",this.OID["2.5.4.25.1"]=" collectiveInternationalISDNNumber",this.OID["2.5.4.26"]=" registeredAddress",this.OID["2.5.4.27"]=" destinationIndicator",this.OID["2.5.4.28"]=" preferredDeliveryMehtod",this.OID["2.5.4.29"]=" presentationAddress",this.OID["2.5.4.3"]=" commonName",this.OID["2.5.4.31"]=" member",this.OID["2.5.4.32"]=" owner",this.OID["2.5.4.33"]=" roleOccupant",this.OID["2.5.4.34"]=" seeAlso",this.OID["2.5.4.35"]=" userPassword",this.OID["2.5.4.36"]=" userCertificate",this.OID["2.5.4.37"]=" caCertificate",this.OID["2.5.4.38"]=" authorityRevocationList",this.OID["2.5.4.39"]=" certificateRevocationList",this.OID["2.5.4.4"]=" surname",this.OID["2.5.4.40"]=" crossCertificatePair",this.OID["2.5.4.41"]=" name",this.OID["2.5.4.42"]=" givenName",this.OID["2.5.4.43"]=" initials",this.OID["2.5.4.44"]=" generationQualifier",this.OID["2.5.4.45"]=" uniqueIdentifier",this.OID["2.5.4.46"]=" dnQualifier",this.OID["2.5.4.47"]=" enhancedSearchGuide",this.OID["2.5.4.48"]=" protocolInformation",this.OID["2.5.4.49"]=" distinguishedName",this.OID["2.5.4.5"]=" serialNumber",this.OID["2.5.4.50"]=" uniqueMember",this.OID["2.5.4.51"]=" houseIdentifier",this.OID["2.5.4.52"]=" supportedAlgorithms",this.OID["2.5.4.53"]=" deltaRevocationList",this.OID["2.5.4.55"]=" clearance",this.OID["2.5.4.58"]=" crossCertificatePair",this.OID["2.5.4.6"]=" countryName",this.OID["2.5.4.7"]=" localityName",this.OID["2.5.4.7.1"]=" collectiveLocalityName",this.OID["2.5.4.8"]=" stateOrProvinceName",this.OID["2.5.4.8.1"]=" collectiveStateOrProvinceName",this.OID["2.5.4.9"]=" streetAddress",this.OID["2.5.4.9.1"]=" collectiveStreetAddress",this.OID["2.5.6.0"]=" top",this.OID["2.5.6.1"]=" alias",this.OID["2.5.6.10"]=" residentialPerson",this.OID["2.5.6.11"]=" applicationProcess",this.OID["2.5.6.12"]=" applicationEntity",this.OID["2.5.6.13"]=" dSA",this.OID["2.5.6.14"]=" device",this.OID["2.5.6.15"]=" strongAuthenticationUser",this.OID["2.5.6.16"]=" certificateAuthority",this.OID["2.5.6.17"]=" groupOfUniqueNames",this.OID["2.5.6.2"]=" country",this.OID["2.5.6.21"]=" pkiUser",this.OID["2.5.6.22"]=" pkiCA",this.OID["2.5.6.3"]=" locality",this.OID["2.5.6.4"]=" organization",this.OID["2.5.6.5"]=" organizationalUnit",this.OID["2.5.6.6"]=" person",this.OID["2.5.6.7"]=" organizationalPerson",this.OID["2.5.6.8"]=" organizationalRole",this.OID["2.5.6.9"]=" groupOfNames",this.OID["2.5.8"]=" X.500- Algorithms",this.OID["2.5.8.1"]=" X.500- Alg - Encryption",
this.OID["2.5.8.1.1"]=" rsa",this.OID["2.54.1775.2"]=" hashedRootKey",this.OID["2.54.1775.3"]=" certificateType",this.OID["2.54.1775.4"]=" merchantData",this.OID["2.54.1775.5"]=" cardCertRequired",this.OID["2.54.1775.7"]=" setQualifier",this.OID["2.54.1775.99"]=" set - data",this.OID["1.3.6.1.5.5.7.3.1"]="Аутентификация сервера",this.OID["1.3.6.1.5.5.7.3.2"]="Аутентификация клиента",this.OID["1.3.6.1.5.5.7.3.3"]="Подписывание кода",this.OID["1.3.6.1.5.5.7.3.4"]="Защищенная электронная почта",this.OID["1.3.6.1.5.5.7.3.8"]="Простановка штампов времени",this.OID["1.3.6.1.4.1.311.10.5.1"]="Цифровые права",this.OID["1.3.6.1.4.1.311.10.3.12"]="Подписывание документа"}return e.prototype.decode=function(e){return this.TAB="                              ",this.TAB_num=-1,this.readASN1(e)},e.prototype.readASN1=function(e){var t=0,n="";for(this.TAB_num++;t<e.length;){var r=parseInt("0x"+e.substr(t,2)),i=32&r,o=128&r,s=31&r,a=o?"["+s+"]":this.NAME[s];void 0==a&&(a="Unsupported_TAG"),t+=2;var c=0;if(5!=s){if(128&parseInt("0x"+e.substr(t,2))){var u=127&parseInt("0x"+e.substr(t,2));if(u>2){var l="LENGTH field is too long.(at "+t+")\nThis program accepts up to 2 octets of Length field.";return alert(l),l}c=parseInt("0x"+e.substr(t+2,2*u)),t+=2*u+2}else 0!=u&&(c=parseInt("0x"+e.substr(t,2)),t+=2);if(c>e.length-t){var l="LENGTH is longer than the rest.\n";return NaN+c+", rest: "+e.length+")",alert(l),l}}else t+=2;var p="",h=this.TAB.substr(0,3*this.TAB_num);c&&(p=e.substr(t,2*c),t+=2*c),n+=h+a+" ",n+=i?"{\n"+this.readASN1(p)+h+"}":this.getValue(o?4:s,p),n+="\n"}return this.TAB_num--,n},e.prototype.getValue=function(e,t){var n="";if(1==e)n=t?"TRUE":"FALSE";else if(2==e)n=t.length<3?parseInt("0x"+t):t+" : Too long Integer. Printing in HEX.";else if(3==e){var r=parseInt("0x"+t.substr(0,2)),i=t.substr(2);n=i.length>4?"0x"+i:parseInt("0x"+i).toString(2),n+=" : "+r+" unused bit(s)"}else if(5==e)n="";else if(6==e){var o=new Array,s=parseInt("0x"+t.substr(0,2));o[0]=Math.floor(s/40),o[1]=s-40*o[0];var a,c=new Array,u=0;for(a=1;a<t.length-2;a+=2){var l=parseInt("0x"+t.substr(a+1,2));if(c.push(127&l),128&l)u++;else{var p,h=0;for(p in c)h+=c[p]*Math.pow(128,u--);o.push(h),u=0,c=new Array}}n=o.join("."),this.OID[n]&&(n+=" ("+this.OID[n]+")")}else if(this.NAME[e].match(/(Time|String)$/)){var C=0;for(n+="'";C<t.length;)n+=String.fromCharCode(parseInt("0x"+t.substr(C,2),16)),C+=2;n+="'"}else n=t;return n},e}();e.Asn1=t}(t=e.ASN1||(e.ASN1={}))}(System||(System={}));var System;!function(e){var t;!function(t){var n;!function(t){var n=function(){function t(t){this.Version=null;var n=null,r=null;if(t){t.userAgent.indexOf("WOW64")>-1||"Win64"==t.platform?this.Digit=64:this.Digit=32;var i,o=t.userAgent,s=o.match(/(opera|chrome|safari|firefox|msie|trident|yabrowser(?=\/))\/?\s*(\d+)/i)||[];/trident/i.test(s[1])?(i=/\brv[ :]+(\d+)/g.exec(o)||[],n="MSIE",r=new e.SemVer(i[1],0,0)):"Chrome"===s[1]?(i=o.match(/\b(OPR|Edge|YaBrowser|Opera)\/(\d+)/),null!=i?(n=i[1].replace("OPR","Opera"),r=new e.SemVer(i[2],0,0)):(n=s[1],r=new e.SemVer(s[2],0,0))):(s=s[2]?[s[1],s[2]]:[t.appName,t.appVersion,"-?"],null!=(i=o.match(/version\/(\d+)/i))&&s.splice(1,1,i[1]),n=s[0],r=new e.SemVer(s[1],0,0))}this.Name=n,this.Version=r}return t}();t.Navigator=n}(n=t.Utils||(t.Utils={}))}(t=e.Browser||(e.Browser={}))}(System||(System={}));

